<!DOCTYPE html>
<html lang="en">
    <head>
        <script>
            if (localStorage.getItem("theme") === "dark") {
                document.documentElement.classList.add("dark");
            }
        </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ title }} â€¢ {{ site.title }}</title>
        <link rel="stylesheet" href="{{ '/styles/style.css' | url }}">
        <link rel="icon" type="image/png" href="{{ '/assets/images/favicon.png' | url }}">
        <link rel="apple-touch-icon" href="{{ '/assets/images/favicon.png' | url }}">
    </head>
    <body>
        <header class="site-header">
            <div class="container">
                <div class="site-title">
                    <a href="{{ '/' | url }}">{{ site.displayTitle }}</a>
                </div>
                <nav class="site-nav">
                    <ul>
                        {% for item in nav %}
                        <li class="nav-item {% if page.url == item.url %}active{% endif %}">
                            <a href="{{ item.url | url }}">{{ item.title }}</a>
                            
                            {% if item.children %}
                            <ul class="sub-nav">
                                {% for child in item.children %}
                                <li class="{% if page.url == child.url %}active{% endif %}">
                                    <a href="{{ child.url | url }}">{{ child.title }}</a>
                                </li>
                                {% endfor %}
                            </ul>
                            {% endif %}
                        </li>
                        {% endfor %}
                    </ul>
                    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
                        <svg id="theme-icon" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                            <path 
                                id="theme-icon-path"
                                d="M12 4a8 8 0 1 0 0 16 8 8 0 0 1 0-16z"
                                fill="currentColor">
                            </path>
                            <g 
                                id="sun-rays"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round">
                                    <line x1="12" y1="1" x2="12" y2="4"/>
                                    <line x1="12" y1="20" x2="12" y2="23"/>
                                    <line x1="4.2" y1="4.2" x2="6.3" y2="6.3"/>
                                    <line x1="17.7" y1="17.7" x2="19.8" y2="19.8"/>
                                    <line x1="1" y1="12" x2="4" y2="12"/>
                                    <line x1="20" y1="12" x2="23" y2="12"/>
                                    <line x1="4.2" y1="19.8" x2="6.3" y2="17.7"/>
                                    <line x1="17.7" y1="6.3" x2="19.8" y2="4.2"/>
                            </g>
                        </svg>
                    </button>
                </nav>
            </div>
        </header>
        <main class="content">
            {% if not hidePageTitle %}
                <h1 class="page-title">{{ title }}</h1>
            {% endif %}
            {{ content | safe }}
        </main>
        <footer>
            <p>&copy; {{ "" | year }} <a href="{{ '/about/' | url }}">Sasha Smith</a> Â· <a href="{{ '/contact/' | url }}">Say Hi</a> ðŸ‘‹</p>
        </footer>
    <script>
        const btn = document.getElementById("theme-toggle");
        const iconPath = document.getElementById("theme-icon-path");

        const SUN = "M12 4a8 8 0 1 0 0 16 8 8 0 0 1 0-16z";
        const MOON = "M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z";

        // Apply correct initial icon
        iconPath.setAttribute(
            "d",
            document.documentElement.classList.contains("dark") ? MOON : SUN
        );

        btn.addEventListener("click", () => {
            const isDark = document.documentElement.classList.toggle("dark");
            localStorage.setItem("theme", isDark ? "dark" : "light");

            iconPath.setAttribute("d", isDark ? MOON : SUN);
        });
    </script>
    <script>
        document.querySelectorAll(".accordion-toggle").forEach(button => {
        button.addEventListener("click", () => {
            const item = button.parentElement;
            item.classList.toggle("active");
            const expanded = button.getAttribute("aria-expanded") === "true";
            button.setAttribute("aria-expanded", !expanded);
            });
        });
    </script>
    </body>
</html>